spring.application.name=backend

# Database Configuration - LOCALHOST for local development
spring.datasource.url=jdbc:postgresql://localhost:5432/elguindyDB
spring.datasource.username=postgres
spring.datasource.password=1234
spring.datasource.driver-class-name=org.postgresql.Driver
spring.docker.compose.enabled=false

# JPA & Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.generate-ddl=true
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# Development settings to handle schema issues
spring.jpa.properties.hibernate.hbm2ddl.auto=update
spring.jpa.properties.hibernate.hbm2ddl.halt_on_error=false
spring.jpa.properties.hibernate.hbm2ddl.drop_unknown_tables=false

# Disable foreign key validation during development (use with caution)
spring.jpa.properties.hibernate.hbm2ddl.import_files_sql_extractor=org.hibernate.tool.schema.internal.script.MultiLineSqlScriptExtractor

spring.security.user.name=admin
spring.security.user.password=admin
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration

# AWS S3 Configuration - Replace MinIO
aws.s3.bucket-name=elguindy
aws.s3.region=us-east-1
aws.s3.enabled=true
# Optional: Custom S3 endpoint URL (leave empty for standard AWS S3)
aws.s3.public-url=http://localhost:9000

# Legacy MinIO Configuration - Keep for backward compatibility during migration
# You can remove these after migration is complete
minio.endpoint=http://localhost:9000
minio.publicUrl=http://localhost:9000
minio.accessKey=minioadmin
minio.secretKey=minioadmin
minio.bucketName=elguindy
minio.enabled=true

# Storage Configuration
storage.type=minio

# Enable multipart uploads
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.file-size-threshold=2KB

# Management endpoints for health check
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=always

# Logging for debugging
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.com.example.backend=DEBUG
